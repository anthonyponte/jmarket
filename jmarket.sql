CREATE TABLE USUARIO (
    ID BIGINT GENERATED BY DEFAULT AS IDENTITY(START WITH 1, INCREMENT BY 1) PRIMARY KEY,
    TIPO_USUARIO INTEGER NOT NULL,
    NOMBRE_USUARIO VARCHAR(12) NOT NULL,
    CONTRASENA VARCHAR(14) NOT NULL,
    ESTADO INTEGER NOT NULL,
    PERSONA_ID BIGINT NOT NULL,
    FECHA_INGRESO TIMESTAMP DEFAULT NOW() NOT NULL
);

CREATE TABLE PERSONA (
    ID BIGINT GENERATED BY DEFAULT AS IDENTITY(START WITH 1, INCREMENT BY 1) PRIMARY KEY,
    TIPO_DOCUMENTO INTEGER NOT NULL,
    NUMERO_DOCUMENTO VARCHAR(25) NOT NULL,
    PRIMER_NOMBRE VARCHAR(250) NOT NULL,
    SEGUNDO_NOMBRE VARCHAR(250) NOT NULL,
    APELLIDO_PATERNO VARCHAR(250) NOT NULL,
    APELLIDO_MATERNO VARCHAR(250) NOT NULL,
    ESTADO INTEGER NOT NULL,
    FECHA_INGRESO TIMESTAMP DEFAULT NOW() NOT NULL
);

ALTER TABLE USUARIO ADD FOREIGN KEY (PERSONA_ID) REFERENCES PERSONA (ID);

CREATE TABLE VENTA (
	ID BIGINT NOT NULL IDENTITY,
	NUMERO BIGINT NOT NULL,
	FECHA_EMISION TIMESTAMP NOT NULL,
	CLIENTE_NOMBRE VARCHAR(255),
	CONSTRAINT SYS_PK_10149 PRIMARY KEY (ID)
);
CREATE UNIQUE INDEX IDX_VENTA_NUMERO ON VENTA (NUMERO);

CREATE TABLE ITEM_VENTA (
	ID BIGINT NOT NULL IDENTITY,
	CODIGO VARCHAR(64) NOT NULL,
	NOMBRE VARCHAR(255) NOT NULL,
	PRECIO_UNITARIO DECIMAL(9,2) NOT NULL,
	CONSTRAINT SYS_PK_10127 PRIMARY KEY (ID)
);

CREATE TABLE VENTA_DETALLE (
	ID BIGINT NOT NULL IDENTITY,
	VENTA_ID BIGINT NOT NULL,
	FILA INTEGER NOT NULL,
	ITEM_ID BIGINT NOT NULL,
	PRECIO_UNITARIO DECIMAL(9,2) NOT NULL,
	CANTIDAD DECIMAL(9,2) NOT NULL,
	CONSTRAINT SYS_PK_10136 PRIMARY KEY (ID)
);
CREATE INDEX VENTA_DETALLE_ITEM_FK ON VENTA_DETALLE (ITEM_ID);
CREATE INDEX VENTA_DETALLE_VENTA_FK ON VENTA_DETALLE (VENTA_ID);
ALTER TABLE .VENTA_DETALLE ADD CONSTRAINT VENTA_DETALLE_ITEM_FK FOREIGN KEY (ITEM_ID) REFERENCES ITEM_VENTA(ID);
ALTER TABLE .VENTA_DETALLE ADD CONSTRAINT VENTA_DETALLE_VENTA_FK FOREIGN KEY (VENTA_ID) REFERENCES VENTA(ID);

java -classpath C:\Users\anthonyponte\Downloads\hsqldb-2.7.2\hsqldb\lib\hsqldb.jar org.hsqldb.server.Server --database.0 file:C:\Users\anthonyponte\Documents\NetBeansProjects\jmarket\hsqldb\jmarket --dbname.0 jmarket